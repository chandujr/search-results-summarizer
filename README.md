# Search Results Summarizer

AI-powered search summaries for any search engine using OpenRouter. Works transparently with your existing search engine installation.

## Project Structure

```
search-results-summarizer/
├── docker-compose.yml
├── .env
├── README.md
└── search-results-summarizer/
    ├── Dockerfile
    ├── package.json
    ├── server.js
    ├── config/
    │   └── index.js
    ├── services/
    │   └── proxy/
    │       ├── base-proxy.js
    │       ├── searxng-proxy.js
    │       └── fourget-proxy.js
    ├── ai/
    │   ├── openrouter-client.js
    │   └── summary-generator.js
    ├── utils/
    │   ├── html-processor.js
    │   ├── rate-limiter.js
    │   ├── logger.js
    │   └── template-loader.js
    └── templates/
        ├── summary-template-searxng.html
        └── summary-template-4get.html
```

## Quick Start

### 1. Create Project Structure

```bash
mkdir -p search-results-summarizer/search-results-summarizer
cd search-results-summarizer
```

Copy all the provided files into their respective locations.

### 2. Configure Environment

Edit `.env` and add your OpenRouter API key:

```bash
OPENROUTER_API_KEY=sk-or-v1-your-actual-key-here
OPENROUTER_MODEL=model-id-here
```

Get your API key from: https://openrouter.ai/keys

See all models: https://openrouter.ai/models

### 3. Start Services

```bash
docker-compose up -d
```

### 4. Configure Brave Browser (Optional)

1. Open Brave Settings → Search Engine
2. Click "Manage search engines and site search"
3. Click "Add" button
4. Fill in:
   - **Search engine**: Search Results Summarizer
   - **Shortcut**: srs
   - **URL**: `http://localhost:3000/search?q=%s`
5. Click "Add"
6. Click the three dots next to "Search Results Summarizer" and select "Make default"

## Test It

Visit: `http://localhost:3000/search?q=latest+amd+graphics+card+price+germany`

You should see search results with an AI summary at the top!

## Configuration Options

Edit `docker-compose.yml` to customize:

| Variable | Default | Description |
|----------|---------|-------------|
|`SEARCH_URL` | `http://localhost:8888` | URL of the search engine |
| `ENGINE_NAME` | `searxng` | Type of search engine (searxng or 4get) |
| `SUMMARY_ENABLED` | `true` | Enable/disable summaries |
| `MAX_RESULTS_FOR_SUMMARY` | `7` | Number of results to summarize |

### Switching Between Search Engines

To use 4get instead of SearXNG, update your `docker-compose.yml`:

```yaml
environment:
  - SEARCH_URL=http://localhost:8081  # 4get URL
  - ENGINE_NAME=4get                   # Set engine type
```

Then restart:
```bash
docker-compose up -d --build
```

## Useful Commands

```bash
# Start services
docker-compose up -d

# View logs
docker-compose logs -f search-results-summarizer

# Stop services
docker-compose down

# Restart after config change
docker-compose up -d --build
```

## Complete Removal

To completely remove everything:

```bash
# Stop and remove containers
docker-compose down

# Remove Docker images
docker rmi search-results-summarizer-search-results-summarizer

# Delete project folder
cd ..
rm -rf search-results-summarizer
```

That's it! No global files, no system pollution.

## Troubleshooting

**Summary not appearing?**
- Check logs: `docker-compose logs search-results-summarizer`
- Verify API key in `.env`
- Verify AI model ID in `.env`
- Check your OpenRouter quota
- Ensure `SUMMARY_ENABLED=true`

**"Proxy Error" message?**
- Check if your search engine is running
- Verify network connectivity between containers
- Ensure SEARCH_URL and ENGINE_NAME are correctly set

**Slow summaries?**
- Switch to faster model
- Reduce `MAX_RESULTS_FOR_SUMMARY`

## Privacy Note

- Summaries are generated by sending search results to OpenRouter
- Your search queries and top results are sent to the AI provider
- No data is stored by this proxy
- Consider privacy implications before use

## Adding Support for New Search Engines

To add support for a new search engine:

1. Create a new template file: `templates/summary-template-{engine}.html`
2. Create a new proxy service: `services/proxy/{engine}-proxy.js`
3. Update `server.js` to register the new routes
4. Set `SEARCH_URL` and `ENGINE_NAME` of the new engine in `docker-compose.yml`

## License

GPL-3.0
