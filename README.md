# SearXNG AI Proxy

AI-powered search summaries for SearXNG using OpenRouter. Works transparently with your existing SearXNG installation.

## ğŸ“ Project Structure

```
searxng-ai-proxy-project/
â”œâ”€â”€ docker-compose.yml
â”œâ”€â”€ .env
â”œâ”€â”€ README.md
â””â”€â”€ searxng-ai-proxy/
    â”œâ”€â”€ Dockerfile
    â”œâ”€â”€ package.json
    â””â”€â”€ server.js
```

## ğŸš€ Quick Start

### 1. Create Project Structure

```bash
mkdir -p searxng-ai-proxy-project/searxng-ai-proxy
cd searxng-ai-proxy-project
```

Copy all the provided files into their respective locations.

### 2. Configure Environment

Edit `.env` and add your OpenRouter API key:

```bash
OPENROUTER_API_KEY=sk-or-v1-your-actual-key-here
```

Get your API key from: https://openrouter.ai/keys

### 3. Start Services

```bash
docker-compose up -d
```

### 4. Configure Brave Browser

1. Open Brave Settings â†’ Search Engine
2. Click "Manage search engines and site search"
3. Click "Add" button
4. Fill in:
   - **Search engine**: SearXNG AI
   - **Shortcut**: searxng
   - **URL**: `http://localhost:3000/search?q=%s`
5. Click "Add"
6. Click the three dots next to "SearXNG AI" and select "Make default"

## âœ… Test It

Visit: `http://localhost:3000/search?q=artificial+intelligence`

You should see search results with an AI summary at the top!

## ğŸ›ï¸ Configuration Options

Edit `.env` to customize:

| Variable | Default | Description |
|----------|---------|-------------|
| `OPENROUTER_API_KEY` | - | Your OpenRouter API key (required) |
| `OPENROUTER_MODEL` | `anthropic/claude-3.5-sonnet` | AI model to use |
| `SUMMARY_ENABLED` | `true` | Enable/disable summaries |
| `MAX_RESULTS_FOR_SUMMARY` | `5` | Number of results to summarize |

### Recommended Models

- **anthropic/claude-3.5-sonnet** - Best quality ($3/1M tokens)
- **anthropic/claude-3-haiku** - Fast & cheap ($0.25/1M tokens)
- **openai/gpt-4o-mini** - Budget option ($0.15/1M tokens)

See all models: https://openrouter.ai/models

## ğŸ“Š Estimated Costs

Each search summary costs approximately:
- Claude 3.5 Sonnet: ~$0.002-0.005 per search
- Claude 3 Haiku: ~$0.0002-0.0005 per search
- GPT-4o Mini: ~$0.0001-0.0003 per search

(Based on typical 300-500 token summaries)

## ğŸ› ï¸ Useful Commands

```bash
# Start services
docker-compose up -d

# View logs
docker-compose logs -f searxng-ai-proxy

# Stop services
docker-compose down

# Restart after config change
docker-compose restart searxng-ai-proxy

# Temporarily disable summaries
docker-compose exec searxng-ai-proxy sh -c 'SUMMARY_ENABLED=false npm start'
```

## ğŸ—‘ï¸ Complete Removal

To completely remove everything:

```bash
# Stop and remove containers
docker-compose down

# Remove Docker images
docker rmi searxng-ai-proxy-project-searxng-ai-proxy

# Delete project folder
cd ..
rm -rf searxng-ai-proxy-project
```

That's it! No global files, no system pollution.

## ğŸ”§ Troubleshooting

**Summary not appearing?**
- Check logs: `docker-compose logs searxng-ai-proxy`
- Verify API key in `.env`
- Ensure `SUMMARY_ENABLED=true`

**"Proxy Error" message?**
- Check SearXNG is running: `curl http://localhost:8080`
- Verify network connectivity between containers

**Slow summaries?**
- Switch to faster model (claude-3-haiku or gpt-4o-mini)
- Reduce `MAX_RESULTS_FOR_SUMMARY`

## ğŸ”’ Privacy Note

- Summaries are generated by sending search results to OpenRouter
- Your search queries and top results are sent to the AI provider
- No data is stored by this proxy (stateless)
- Consider privacy implications before use

## ğŸ“ License

MIT - Do whatever you want with it!
